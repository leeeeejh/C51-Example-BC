C51 COMPILER V9.00   12864TUPIAN                                                           11/24/2019 22:37:00 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE 12864TUPIAN
OBJECT MODULE PLACED IN 12864tupian.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE 12864tupian.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*************************************************************************************
   2          功能简介：      本程序驱动12864显示一副的图片。
   3          ************************************************************************************/
   4          
   5          #include <reg51.h>
   6          #include <intrins.h>
   7          
   8          #define uchar unsigned char
   9          #define uint  unsigned int
  10          /*12864端口定义*/
  11          #define LCD_data  P0             //数据口
  12          sbit LCD_RS  =  P3^5;            //寄存器选择输入 
  13          sbit LCD_RW  =  P3^6;            //液晶读/写控制
  14          sbit LCD_EN  =  P3^4;            //液晶使能控制
  15          sbit LCD_PSB =  P3^7;            //串/并方式控制
  16          sbit wela    =  P2^6;
  17          sbit dula    =  P2^7;
  18          
  19          unsigned char code zhu[]=               //图片代码
  20          {
  21          /*0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  22          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  23          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD4,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x00,0x00,0x05,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  28          0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x03,0x50,0x00,0x50,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  31          0x00,0x00,0x3C,0x04,0x00,0xA0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  32          0x00,0x00,0x40,0x01,0x0B,0x15,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  33          0x00,0x00,0x40,0x00,0x88,0x00,0x00,0x06,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  34          0x00,0x01,0x80,0x00,0x60,0x00,0x00,0x05,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  35          0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x03,0x90,0x00,0x01,0xB6,0x36,0x00,0x00,0x00,
  36          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x40,0x00,0x01,0xFE,0x36,0x00,0x00,0x00,
  37          0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x02,0x20,0x00,0x01,0xB6,0x36,0x00,0x00,0x00,
  38          0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x02,0xA0,0x00,0x03,0x6F,0xFF,0x00,0x00,0x00,
  39          0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x1D,0x00,0x00,0x00,0x00,0x2C,0x00,0x00,0x00,
  40          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x05,0xC0,0x00,0x00,0x00,0x28,0x00,0x00,0x00,
  41          0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x38,0x00,0x00,0x00,
  42          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A,0x80,0x40,0x00,0x00,0x00,0x00,0x00,0x00,
  43          0x00,0x00,0x10,0x80,0x00,0x00,0x1F,0x08,0x47,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
  44          0x00,0x00,0x01,0x20,0x00,0x00,0x3D,0x13,0x0C,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,
  45          0x00,0x00,0x08,0x10,0x00,0x00,0x27,0xA0,0x18,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
  46          0x00,0x00,0x02,0x10,0x00,0x00,0x3F,0x80,0x38,0xC7,0x00,0x00,0x00,0x00,0x00,0x00,
  47          0x00,0x00,0x04,0x03,0xE0,0x00,0x33,0x90,0x3F,0xC7,0x00,0x00,0x00,0x00,0x00,0x00,
  48          0x00,0x00,0x00,0x03,0xB0,0x00,0x33,0x10,0x7F,0x87,0x00,0x00,0x00,0x00,0x00,0x00,
  49          0x00,0x00,0x08,0x24,0xF0,0x0C,0x0E,0x00,0xFF,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,
  50          0x00,0x00,0x00,0x07,0xF0,0xC2,0x00,0x00,0xFE,0x1F,0x81,0xB3,0xE6,0xD8,0xF0,0x00,
  51          0x00,0x00,0x08,0x46,0x71,0x06,0x00,0x08,0x3F,0x1F,0x01,0xF6,0x67,0xF9,0xB0,0x00,
  52          0x00,0x00,0x00,0x03,0x20,0x98,0x00,0x00,0x3F,0xFF,0x01,0xB6,0xC6,0xD9,0x80,0x00,
  53          0x00,0x00,0x08,0x40,0xC0,0x24,0x00,0x04,0x3F,0x1F,0x03,0x7F,0xFD,0xBE,0xFC,0x00,
  54          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x1E,0x1E,0x00,0x00,0x00,0x00,0x00,0x00,
  55          0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x01,0x0E,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,
C51 COMPILER V9.00   12864TUPIAN                                                           11/24/2019 22:37:00 PAGE 2   

  56          0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x87,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
  57          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  58          0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  59          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  60          0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  61          0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  62          0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0x00,
  63          0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x02,0x08,0x00,0x00,0xC0,0x00,0x00,0x00,0x00,
  64          0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,
  65          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x88,0x00,0x01,0x8C,0x00,0x00,0x00,0x00,
  66          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x01,0x8E,0x00,0x00,0x00,0x00,
  67          0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x01,0x00,0x00,0x01,0xB6,0x06,0xDB,0x6C,0x00,
  68          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xFF,0x06,0xDB,0x6C,0x00,
  69          0x00,0x00,0x00,0x40,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  70          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  71          0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  72          0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  73          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  74          0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  75          0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  76          0x00,0x00,0x00,0x00,0x40,0x00,0x01,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  77          0x00,0x00,0x00,0x00,0x94,0xA4,0x68,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  78          0x00,0x00,0x00,0x00,0x02,0x19,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  79          0x00,0x00,0x00,0x00,0x42,0x00,0x10,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  80          0x00,0x00,0x00,0x00,0x20,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  81          0x00,0x00,0x00,0x00,0x14,0x00,0x0A,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  82          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  83          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  84          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00  */
  85          0x03,0x00,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  86          0x03,0x0F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  87          0x3F,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  88          0x3F,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  89          0x3F,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  90          0x3F,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  91          0x3F,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  92          0x07,0xFF,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  93          0x07,0xFF,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  94          0x03,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  95          0x01,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  96          0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  97          0x00,0xFC,0x00,0x00,0x00,0x00,0x00,0x7F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  98          0x00,0xF0,0x00,0x00,0x00,0x00,0x03,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  99          0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,
 100          0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
 101          0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
 102          0x00,0x00,0x00,0x00,0x00,0x03,0xFF,0xC0,0x1F,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,
 103          0x00,0x00,0x00,0x00,0x00,0x07,0xFE,0x00,0x03,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
 104          0x00,0x00,0x00,0x00,0x00,0x0F,0xF8,0x00,0x00,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,
 105          0x00,0x00,0x00,0x00,0x00,0x1F,0xE0,0x00,0x00,0x3F,0xC0,0x00,0x00,0x00,0x00,0x00,
 106          0x00,0x00,0x00,0x00,0x00,0x3F,0x80,0x00,0x00,0x0F,0xE0,0x00,0x00,0x00,0x00,0x00,
 107          0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x07,0xE0,0x00,0x00,0x00,0x00,0x00,
 108          0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x07,0x83,0xF0,0x00,0x00,0x00,0x00,0x00,
 109          0x00,0x00,0x00,0x00,0x00,0x7C,0x0F,0x00,0x0F,0xC1,0xF8,0x00,0x00,0x00,0x00,0x00,
 110          0x00,0x00,0x00,0x00,0x00,0xFC,0x3F,0x80,0x1F,0xE1,0xF8,0x00,0x00,0x00,0x00,0x00,
 111          0x00,0x00,0x00,0x00,0x00,0xF8,0xFF,0xE0,0x3F,0xF0,0xF8,0x00,0x00,0x00,0x00,0x00,
 112          0x00,0x00,0x00,0x00,0x01,0xF9,0xFF,0xF0,0x3F,0xF0,0xFC,0x00,0x00,0x00,0x00,0x00,
 113          0x00,0x00,0x00,0x00,0x01,0xF1,0xFF,0xF0,0x7F,0xF8,0x7C,0x00,0x00,0x00,0x00,0x00,
 114          0x00,0x00,0x00,0x00,0x01,0xF1,0xFB,0xF0,0xFC,0xFC,0x7C,0x00,0x00,0x00,0x00,0x00,
 115          0x00,0x00,0x00,0x00,0x03,0xE0,0xE0,0xE0,0xF8,0xFC,0x3E,0x00,0x00,0x00,0x00,0x00,
 116          0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0xF8,0x7C,0x3E,0x00,0x00,0x00,0x00,0x00,
 117          0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0x70,0x38,0x3E,0x00,0x00,0x00,0x00,0x00,
C51 COMPILER V9.00   12864TUPIAN                                                           11/24/2019 22:37:00 PAGE 3   

 118          0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0x00,0x00,0x3E,0x00,0x00,0x0C,0x00,0x00,
 119          0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0x00,0x00,0x3E,0x00,0x00,0x0C,0x00,0x00,
 120          0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,
 121          0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x00,0x00,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,
 122          0x00,0x00,0x00,0x00,0x03,0xE0,0x00,0x07,0xF8,0x00,0x3E,0x00,0x00,0x00,0x00,0x00,
 123          0x00,0x00,0x00,0x00,0x01,0xF0,0x03,0xFF,0xFC,0x00,0x7E,0x00,0x00,0x00,0x00,0x00,
 124          0x00,0x00,0x00,0x00,0x01,0xF0,0x07,0xFF,0xFC,0x00,0x7C,0x00,0x00,0x00,0x00,0x00,
 125          0x00,0x00,0x00,0x00,0x01,0xF8,0x07,0xFF,0xFC,0x00,0x7C,0x00,0x00,0x00,0x00,0x00,
 126          0x00,0x00,0x00,0x00,0x00,0xF8,0x07,0xFF,0xF8,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,
 127          0x00,0x00,0x00,0x00,0x00,0xFC,0x03,0xF8,0x00,0x01,0xF8,0x00,0x00,0x00,0x00,0x00,
 128          0x00,0x00,0x00,0x00,0x00,0xFC,0x00,0x00,0x00,0x01,0xF8,0x00,0x00,0x00,0x00,0x00,
 129          0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x03,0xF0,0x00,0x00,0x00,0x00,0x00,
 130          0x00,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x07,0xE0,0x00,0x00,0x00,0x00,0x00,
 131          0x00,0x00,0x00,0x00,0x00,0x3F,0x80,0x00,0x00,0x0F,0xE0,0x00,0x00,0x00,0x00,0x00,
 132          0x00,0x00,0x00,0x00,0x00,0x1F,0xE0,0x00,0x00,0x3F,0xC0,0x00,0x00,0x00,0x00,0x00,
 133          0x00,0x00,0x00,0x00,0x00,0x0F,0xF0,0x00,0x00,0x7F,0x80,0x00,0x00,0x00,0x00,0x00,
 134          0x00,0x00,0x00,0x00,0x00,0x07,0xFE,0x00,0x01,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
 135          0x00,0x00,0x00,0x00,0x00,0x03,0xFF,0xC0,0x1F,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,
 136          0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,
 137          0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,
 138          0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,
 139          0x00,0x00,0x00,0x00,0x00,0x00,0x03,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 140          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 141          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 142          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 143          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 144          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 145          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 146          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 147          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 148          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
 149          
 150          };
 151          
 152          #define delayNOP(); {_nop_();_nop_();_nop_();_nop_();};
 153          
 154          void delay0(uchar x);  //x*0.14MS
 155          void beep();
 156          void  dataconv();
 157          void lcd_pos(uchar X,uchar Y);  //确定显示位置
 158          
 159          void delay(int ms)
 160          {
 161   1          while(ms--)
 162   1              {
 163   2            uchar i;
 164   2                for(i=0;i<250;i++)  
 165   2                 {
 166   3                  _nop_();                       
 167   3                      _nop_();
 168   3                      _nop_();
 169   3                      _nop_();
 170   3                 }
 171   2              }
 172   1      }               
 173          
 174          /*******************************************************************/
 175          /*                                                                 */
 176          /*检查LCD忙状态                                                    */
 177          /*lcd_busy为1时，忙，等待。lcd-busy为0时,闲，可写指令与数据。      */
 178          /*                                                                 */
 179          /*******************************************************************/
C51 COMPILER V9.00   12864TUPIAN                                                           11/24/2019 22:37:00 PAGE 4   

 180          bit lcd_busy()
 181           {                          
 182   1          bit result;
 183   1          LCD_RS = 0;
 184   1          LCD_RW = 1;
 185   1          LCD_EN = 1;
 186   1          delayNOP();
 187   1          result = (bit)(P0&0x80);
 188   1          LCD_EN = 0;
 189   1          return(result); 
 190   1       }
 191          /*******************************************************************/
 192          /*                                                                 */
 193          /*写指令数据到LCD                                                  */
 194          /*RS=L，RW=L，E=高脉冲，D0-D7=指令码。                             */
 195          /*                                                                 */
 196          /*******************************************************************/
 197          void lcd_wcmd(uchar cmd)
 198          {                          
 199   1         while(lcd_busy());
 200   1          LCD_RS = 0;
 201   1          LCD_RW = 0;
 202   1          LCD_EN = 0;
 203   1          _nop_();
 204   1          _nop_(); 
 205   1          P0 = cmd;
 206   1          delayNOP();
 207   1          LCD_EN = 1;
 208   1          delayNOP();
 209   1          LCD_EN = 0;  
 210   1      }
 211          /*******************************************************************/
 212          /*                                                                 */
 213          /*写显示数据到LCD                                                  */
 214          /*RS=H，RW=L，E=高脉冲，D0-D7=数据。                               */
 215          /*                                                                 */
 216          /*******************************************************************/
 217          void lcd_wdat(uchar dat)
 218          {                          
 219   1         while(lcd_busy());
 220   1          LCD_RS = 1;
 221   1          LCD_RW = 0;
 222   1          LCD_EN = 0;
 223   1          P0 = dat;
 224   1          delayNOP();
 225   1          LCD_EN = 1;
 226   1          delayNOP();
 227   1          LCD_EN = 0; 
 228   1      }
 229          /*******************************************************************/
 230          /*                                                                 */
 231          /*  LCD初始化设定                                                  */
 232          /*                                                                 */
 233          /*******************************************************************/
 234          void lcd_init()
 235          { 
 236   1      
 237   1          LCD_PSB = 1;         //并口方式
 238   1          
 239   1      //    lcd_wcmd(0x34);      //扩充指令操作
 240   1      //    delay(5);
 241   1          lcd_wcmd(0x30);      //基本指令操作
C51 COMPILER V9.00   12864TUPIAN                                                           11/24/2019 22:37:00 PAGE 5   

 242   1          delay(5);
 243   1          lcd_wcmd(0x0C);      //显示开，关光标
 244   1          delay(5);
 245   1          lcd_wcmd(0x01);      //清除LCD的显示内容
 246   1          delay(5);
 247   1      }
 248          
 249          /*******************************************
 250          函数名称:Draw_PM
 251          功    能:在整个液晶屏幕上画图
 252          参    数:无
 253          返回值  :无
 254          ********************************************/
 255          void Draw_PM(const uchar *ptr)
 256          {
 257   1          uchar i,j,k;
 258   1          wela=0;
 259   1              dula=0; 
 260   1              lcd_wcmd(0x34);        //打开扩展指令集
 261   1              i = 0x80;            
 262   1              for(j = 0;j < 32;j++)
 263   1              {
 264   2              lcd_wcmd(i++);     //列地址
 265   2              lcd_wcmd(0x80);    //行地址，会自加
 266   2                      for(k = 0;k < 16;k++)
 267   2                      {
 268   3                          lcd_wdat(*ptr++);
 269   3                      }
 270   2              }
 271   1              i = 0x80;
 272   1              for(j = 0;j < 32;j++)
 273   1              {
 274   2                  lcd_wcmd(i++);
 275   2              lcd_wcmd(0x88);    
 276   2                      for(k = 0;k < 16;k++)
 277   2                      {
 278   3                          lcd_wdat(*ptr++);
 279   3                      } 
 280   2              }  
 281   1          lcd_wcmd(0x36);        //打开绘图显示
 282   1              lcd_wcmd(0x30);        //回到基本指令集
 283   1      }
 284          
 285          main()
 286           {
 287   1                      wela=0;
 288   1                      dula=0; 
 289   1                      lcd_init();                //初始化LCD    
 290   1                      Draw_PM(zhu);                       //显示可爱猪的图片
 291   1                      while(1);       
 292   1       }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    270    ----
   CONSTANT SIZE    =   1024    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.

C51 COMPILER V9.00   12864TUPIAN                                                           11/24/2019 22:37:00 PAGE 6   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
